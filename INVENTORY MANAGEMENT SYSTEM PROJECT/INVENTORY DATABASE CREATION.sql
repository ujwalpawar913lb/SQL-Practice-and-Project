CREATE DATABASE INVENTORY;
USE INVENTORY;

--WE WILL CREATE DIFFERENT TABLES AND THEN WILL IMPLEMENT CONSTRAINTS USING ALTER COMMAND FOR PRACTICE
--1)FIRST WE WILL CREATE CUST TABLE

CREATE TABLE CUST(
CID CHAR(5),
CNAME VARCHAR(50) NOT NULL,
ADDRESS VARCHAR(75) NOT NULL,
CITY VARCHAR(20) NOT NULL,
PHONE CHAR(10) NOT NULL,
EMAIL VARCHAR(40) NOT NULL,
DOB DATE,
PRIMARY KEY(CID)
);

ALTER TABLE CUST 
ADD CONSTRAINT CKDOB CHECK(DOB<'1-JAN-2000');

--2) WE WILL NOW CREATE SUPPLIER TABLE

CREATE TABLE SUPPLIER(
SID CHAR(5),
SNAME VARCHAR(50) NOT NULL,
SADD VARCHAR(75) NOT NULL,
SCITY VARCHAR(20),
SPHONE CHAR(10),
EMAIL VARCHAR(40),
PRIMARY KEY(SID)
);

ALTER TABLE SUPPLIER
ADD CONSTRAINT DEFCITY DEFAULT 'DELHI' FOR SCITY;

ALTER TABLE SUPPLIER
ADD CONSTRAINT UNQPHN UNIQUE(SPHONE);

--3) CREATE PRODUCT TABLE

CREATE TABLE PRODUCT(
PID CHAR(5),
PDESC VARCHAR(50) NOT NULL,
PRICE FLOAT CHECK(PRICE>0),
CATEGORY VARCHAR(5)  CHECK (CATEGORY IN ('IT','HA','HC')),
SID CHAR(5),
PRIMARY KEY (PID)
);

ALTER TABLE PRODUCT
ADD CONSTRAINT FKSID FOREIGN KEY (SID) REFERENCES SUPPLIER(SID);

--4) LETS CREAT ORDER TABLE 
CREATE TABLE ORDERS(
OID CHAR(5),
ODATE DATE,
CID CHAR(5) REFERENCES CUST(CID),
PID CHAR(5) REFERENCES PRODUCT(PID),
OQTY INT CHECK(OQTY>=1),
PRIMARY KEY(OID)
);

--5) LETS CREATE STOCK TABLE 

CREATE TABLE STOCK(
PID CHAR(5) UNIQUE NOT NULL REFERENCES PRODUCT(PID),
SQTY INT CHECK(SQTY>=0),
ROL INT CHECK(ROL>0),
MOQ INT CHECK(MOQ>=5)
);


--Now we will add records to different tables
--we will create 10-customers,10-suppliers ,15-products,5-orders,10-stocks


INSERT INTO CUST 
VALUES ('C0001','RAMESH KUMAR','ANAND DHAM','PUNE','8965234587','RAMKU@GMAIL.COM','02-JAN-1993'),
('C0002','SIMRAN SINHA','SECTOR 11','DELHI','8964564587','SIMSIN@GMAIL.COM','25-DEC-1994'),
('C0003','GANESH SHINDE','KOTHRUD','PUNE','7594564587','GANSHIN@GMAIL.COM','15-FEB-1986'),
('C0004','GAYATRI VEER','SHIWAJI CHOWK','SOLAPUR','8964567517','GAYVEER97@GMAIL.COM','20-MAR-1997'),
('C0005','NAMAN GUPTA','MIT ROAD','JAIPUR','8964512587','NAMGUP@GMAIL.COM','22-DEC-1996'),
('C0006','ANJALI AGRAWAL','BURHANPUR','INDORE','8964567536','AMJAGR@GMAIL.COM','04-SEP-1997'),
('C0007','SOHAM NEWALKAR','SINHAGAD ROAD','PUNE','7534564587','SOMNEW@GMAIL.COM','27-DEC-1994'),
('C0008','ANIL GUPTA','GHANSOLI','MUMBAI','8967412587','ANILGUP@GMAIL.COM','02-APR-1994'),
('C0009','SALMAN KHAN','AMARGANJ','CHENNAI','8964050877','SALKH@GMAIL.COM','05-MAY-1994'),
('C0010','MOHIKA DAMLE','SADASHIV PETH','PUNE','1246685587','MOHDAM@GMAIL.COM','08-JUN-1994');

SELECT * FROM CUST;

INSERT INTO SUPPLIER
VALUES ('S0001','ROHIT ENTERPRICES LTD','RANJANGAON INDUSTRIAL AREA','PUNE','4587623248','ROHITENT.SALES@YAHOO.COM'),
('S0002','SHUBHAM MUSIC INSTRUMENTS PVT LTD','DELHI INDUSTRIAL AREA ,OLD DELHI','DELHI','4587613248','SHUBHAMMUSICINST.INFO@YAHOO.COM'),
('S0003','GARIMA ELECTRONICS','MARKET STREET','MUMBAI','4587624248','GARIMAELE@GMAIL.COM'),
('S0004','PARIMAL COMPUTERS LLP','EON IT PARK','BANGALORE','4487623248','PARICOM.INFO@GMAIL.COM'),
('S0005','BABA COMPUTERS AND LAPTOP HUB','NEW INDUSTRIAL AREA','AHAMADBAD','4587163248','BABACOMLAP.SALES@YAHOO.COM'),
('S0006','GREATER ELECTROICS','SWAMI VIVEKNAND INDUSTRIAL AREA','GANDINAGAR','4587623249','GREATER.SALES@GMAIL.COM'),
('S0007','CADILLA HEALTHCARE','RAJASTHAN INDUSTRIAL AREA ','JAIPUR','4587623218','CADILLA.SALESINFO@YAHOO.COM'),
('S0008','REDDY LABS','WEST BANGAL INDUSTRIAL AREA','KOLKATA','4587623348','REDDYLABS.INFO@GMAIL.COM'),
('S0009','LIFE VENTRUES PVT LTD','GUJRAT INDUSTRIAL AREA','VAPI','4587627248','LIFEVENTRUES.SALES@YAHOO.COM'),
('S0010','CUSTOM PCS LTD','TECHNOLOGY STREET','BANGALORE','1587623248','CUSTOMPCS.INFO@YAHOO.COM');

SELECT * FROM SUPPLIER;

INSERT INTO PRODUCT
VALUES ('P0001','LAPTOP GRADE1',80000,'IT','S0004'),
('P0002','HD TV',30000,'HA','S0003'),
('P0003','MIXER-GRINDER',5000,'HA','S0006'),
('P0004','OFFICE WORK PC',50000,'IT','S0005'),
('P0005','CUSTOM HIGH GRADE LAPTOP',100000,'IT','S0010'),
('P0006','REFRIGERATOR',20000,'HA','S0001'),
('P0007','HOME THEATRE',15000,'HA','S0002'),
('P0008','AC',35000,'HA','S0006'),
('P0009','INVERTER AND BATTERY',20000,'HA','S0003'),
('P0010','DAILY HEALTH CHEKUP KIT',4000,'HC','S0007'),
('P0011','DIET GUIDANCE SYSTEM',3000,'HC','S0009'),
('P0012','DAILY PREVENTIVE MEDICINES KIT',8000,'HC','S0008'),
('P0013','ULTIMATE GAMING LAPTOP',120000,'IT','S0004'),
('P0014','ANTI-DEPRESSANT KIT',5000,'HC','S0008'),
('P0015','KIDS LAPTOP',30000,'IT','S0010');

SELECT * FROM PRODUCT;

INSERT INTO ORDERS
VALUES ('O0001','01-sep-2018','C0001','P0007',1),
('O0002','15-OCT-2019','C0004','P0002',1),
('O0003','12-JUL-2020','C0002','P0012',3),
('O0004','08-NOV-2019','C0008','P0004',1),
('O0005','03-MAR-2018','C0005','P0013',1);

SELECT * FROM ORDERS;

INSERT INTO STOCK
VALUES ('P0001',20,10,5),
('P0002',20,10,5),
('P0003',20,10,5),
('P0004',20,10,5),
('P0005',20,10,5),
('P0006',20,10,5),
('P0007',20,10,5),
('P0008',20,10,5),
('P0009',20,10,5),
('P0010',20,10,5),
('P0011',20,10,5),
('P0012',20,10,5),
('P0013',20,10,5),
('P0014',20,10,5),
('P0015',20,10,5);

SELECT * FROM STOCK;

--IN THE INVENTORY STRUCTURE DISPLAY : 
--1) PID, PDESC, CATEGORY, SNAME, SCITY 

SELECT P.PID,P.PDESC,P.CATEGORY,S.SNAME,SCITY 
FROM PRODUCT P 
INNER JOIN SUPPLIER S
ON P.SID=S.SID;


--2 ) DISPLAY OID , ODATE , CNAME, CADDRESS, CPHONE, PDESC, PRICE,OQTY, AMT

SELECT O.OID, O.ODATE, C.CNAME,C.ADDRESS,C.CITY,C.PHONE,P.PDESC,P.PRICE,O.OQTY, O.OQTY * P.PRICE AS 'TOTAL ORDER AMOUNT'
FROM ORDERS O
INNER JOIN CUST C ON O.CID=C.CID 
INNER JOIN PRODUCT P ON O.PID=P.PID;